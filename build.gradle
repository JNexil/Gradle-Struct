buildscript {
    ext.kotlin_version = '1.0.3'

    repositories {
        mavenCentral()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}
plugins {
    id "com.jfrog.bintray" version "1.7"
}

apply plugin: 'kotlin'
apply plugin: 'groovy'
apply plugin: 'maven-publish'

group 'su.jfdev.gradle.struct'
version '1.4.5'

repositories {
    jcenter()
}

dependencies {
    compile gradleApi()
    compile "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"

    testCompile 'junit:junit:4.12',
            "com.nhaarman:mockito-kotlin:0.5.1",
            'com.netflix.nebula:nebula-test:latest.release'

    testCompile group: 'org.assertj', name: 'assertj-core', version: '3.5.2'
}

publishing {
    publications {
        general(MavenPublication){
            groupId = group
            version = project.version
            artifactId = "gradle-struct"

            from components.java
        }
    }
}

bintray {
    user = property("binuser")
    key = property("binkey")
    publications = ['general']
    pkg {
        repo = 'maven'
        name = 'Gradle-Struct'
        userOrg = property("binuser")
        licenses = ['MIT']
        vcsUrl = 'https://github.com/Jamefrus/Gradle-Struct.git'
        version {
            name = project.version
            desc = 'Publish improved'
            released = new Date()
            vcsTag = project.version
        }
    }
}